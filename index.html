<html>
  <head>
    <script>
      var nodesToMutate = [
        {
          xpath: `//div[${xpathContainsClass(
            "details-product-option--additions"
          )}]/div[2]`,
          done: false,
          style: { display: "flex" },
        },
        {
          xpath: '//*[@id="accordion"]',
          callback: () => {
            console.log("got accordian");
            jQuery(function ($) {
              $("#accordion").accordion({
                heightStyle: "content",
                collapsible: true,
                header: "h5",
              });
            });
          },
        },
        {
          xpath: `//*[${xpathContainsClass("accordion-item")}]`,
          style: {
            border: "1px solid #06315C",
            padding: "10px",
            marginBottom: "10px",
          },
        },
        // {
        //   xpath:'//*[]',
        //   style:{
        //   },
        // },
        // {
        //   xpath:'//*[]',
        //   style:{
        //   },
        // },
      ];
      function getElementByXpath(path) {
        return document.evaluate(
          path,
          document,
          null,
          XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,
          null
        );
      }
      function xpathContainsClass(className) {
        return `contains(concat(' ',normalize-space(@class),' '),' ${className} ')`;
      }
      function checkNodes(mutations) {
        nodesToMutate.forEach((item, index) => {
          if (!item.done) {
            var snapshot = getElementByXpath(item.xpath);
            for (var i = 0; i < snapshot.snapshotLength; i++) {
              const content = snapshot.snapshotItem(i);
              console.log("got content", item, content);
              // apply styles
              item.style &&
                Object.keys(item.style).forEach((styleItem) => {
                  console.log(
                    "applying style",
                    styleItem,
                    item.style[styleItem]
                  );
                  content.style[styleItem] = item.style[styleItem];
                });
              if (item.callback) {
                item.callback();
              }
              nodesToMutate[index] = { ...item, done: true };
            }
          }
        });
      }
      let observer = new MutationObserver(checkNodes);
      window.addEventListener("DOMContentLoaded", (event) => {
        checkNodes();
        observer.observe(document.getElementById("my-store-75883006"), {
          childList: true,
          subtree: true,
        });
      });
    </script>
  </head>
  <body>
    <div id="pink">pink background</div>
    <h1>Hello</h1>
  </body>
</html>
