<html>
  <head>
    <script>
      var nodesToMutate = [
        {
          xpath: `//div[${xpathContainsClass(
            "details-product-option--additions"
          )}]/div[2]`,
          done: false,
          style: { display: "flex" },
        },
        {
          xpath: '//*[@id="pink"]',
          style: {
            backgroundColor: "pink",
          },
        },
      ];
      function getElementByXpath(path) {
        return document.evaluate(
          path,
          document,
          null,
          XPathResult.FIRST_ORDERED_NODE_TYPE,
          null
        ).singleNodeValue;
      }

      function xpathContainsClass(className) {
        return `contains(concat(' ',normalize-space(@class),' '),' ${className} ')`;
      }

      function checkNodes() {
        nodesToMutate.forEach((item, index) => {
          if (!item.done) {
            var content = getElementByXpath(item.xpath);
            if (content) {
              console.log("got content", item, content);
              // apply styles
              Object.keys(item.style).forEach((styleItem) => {
                console.log("applying style", styleItem, item.style[styleItem]);
                content.style[styleItem] = item.style[styleItem];
              });
              nodesToMutate[index] = { ...item, done: true };
            }
          }
        });
      }

      let observer = new MutationObserver((mutations) => {
        checkNodes();
      });

      window.addEventListener("DOMContentLoaded", (event) => {
        checkNodes();
        observer.observe(document, {
          childList: true,
          subtree: true,
        });
      });
    </script>
  </head>
  <body>
    <div id="pink">pink background</div>
    <h1>Hello</h1>
  </body>
</html>
